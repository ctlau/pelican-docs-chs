<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>参与建设 &mdash; Pelican 3.2 documentation</title>
    
    <link rel="stylesheet" href="_static/pelican.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '3.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Pelican 3.2 documentation" href="index.html" />
    <link rel="next" title="关于 Pelican 的一些历史" href="report.html" />
    <link rel="prev" title="小贴士" href="tips.html" /> 
  </head>
  <body>
  
  


    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="id1">
<h1>参与建设<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>There are many ways to contribute to Pelican. You can improve the
documentation, add missing features, and fix bugs (or just report them). You
can also help out by reviewing and commenting on
<a class="reference external" href="https://github.com/getpelican/pelican/issues">existing issues</a>.</p>
<p>Don&#8217;t hesitate to fork Pelican and submit a pull request on GitHub. When doing
so, please adhere to the following guidelines.</p>
<div class="section" id="contribution-submission-guidelines">
<h2>Contribution submission guidelines<a class="headerlink" href="#contribution-submission-guidelines" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Consider whether your new feature might be better suited as a <a class="reference external" href="http://docs.getpelican.com/en/latest/plugins.html">plugin</a>. Folks
are usually available in the <a class="reference external" href="http://webchat.freenode.net/?channels=pelican&amp;uio=d4">#pelican IRC channel</a> if help is needed to
make that determination.</li>
<li><a class="reference external" href="https://github.com/getpelican/pelican/wiki/Git-Tips#making-your-changes">Create a new git branch</a> specific to your change (as opposed to making
your commits in the master branch).</li>
<li><strong>Don&#8217;t put multiple fixes/features in the same branch / pull request.</strong>
For example, if you&#8217;re hacking on a new feature and find a bugfix that
doesn&#8217;t <em>require</em> your new feature, <strong>make a new distinct branch and pull
request</strong> for the bugfix.</li>
<li>Adhere to PEP8 coding standards whenever possible.</li>
<li>Check for unnecessary whitespace via <tt class="docutils literal"><span class="pre">git</span> <span class="pre">diff</span> <span class="pre">--check</span></tt> before committing.</li>
<li><strong>Add docs and tests for your changes</strong>.</li>
<li><a class="reference external" href="http://docs.getpelican.com/en/latest/contribute.html#running-the-test-suite">Run all the tests</a> <strong>on both Python 2.7 and 3.3</strong> to ensure nothing was
accidentally broken.</li>
<li>First line of your commit message should start with present-tense verb, be 50
characters or less, and include the relevant issue number(s) if applicable.
<em>Example:</em> <tt class="docutils literal"><span class="pre">Ensure</span> <span class="pre">proper</span> <span class="pre">PLUGIN_PATH</span> <span class="pre">behavior.</span> <span class="pre">Refs</span> <span class="pre">#428.</span></tt> If the commit
<em>completely fixes</em> an existing bug report, please use <tt class="docutils literal"><span class="pre">Fixes</span> <span class="pre">#585</span></tt> or <tt class="docutils literal"><span class="pre">Fix</span>
<span class="pre">#585</span></tt> syntax (so the relevant issue is automatically closed upon PR merge).</li>
<li>After the first line of the commit message, add a blank line and then a more
detailed explanation (when relevant).</li>
<li>If you have previously filed a GitHub issue and want to contribute code that
addresses that issue, <strong>please use</strong> <tt class="docutils literal"><span class="pre">hub</span> <span class="pre">pull-request</span></tt> instead of using
GitHub&#8217;s web UI to submit the pull request. This isn&#8217;t an absolute
requirement, but makes the maintainers&#8217; lives much easier! Specifically:
<a class="reference external" href="https://github.com/defunkt/hub/#installation">install hub</a> and then run
<a class="reference external" href="https://github.com/defunkt/hub/#git-pull-request">hub pull-request</a> to
turn your GitHub issue into a pull request containing your code.</li>
</ul>
<p>Check out our <a class="reference external" href="https://github.com/getpelican/pelican/wiki/Git-Tips">Git Tips</a> page or ask on the <a class="reference external" href="http://webchat.freenode.net/?channels=pelican&amp;uio=d4">#pelican IRC channel</a> if you
need assistance or have any questions about these guidelines.</p>
</div>
<div class="section" id="setting-up-the-development-environment">
<h2>Setting up the development environment<a class="headerlink" href="#setting-up-the-development-environment" title="Permalink to this headline">¶</a></h2>
<p>While there are many ways to set up one&#8217;s development environment, following
is a method that uses <a class="reference external" href="http://www.virtualenv.org/">virtualenv</a>. If you don&#8217;t
have <tt class="docutils literal"><span class="pre">virtualenv</span></tt> installed, you can install it via:</p>
<div class="highlight-python"><pre>$ pip install virtualenv</pre>
</div>
<p>Virtual environments allow you to work on Python projects which are isolated
from one another so you can use different packages (and package versions) with
different projects.</p>
<p>To create and activate a virtual environment, use the following syntax:</p>
<div class="highlight-python"><pre>$ virtualenv ~/virtualenvs/pelican
$ cd ~/virtualenvs/pelican
$ . bin/activate</pre>
</div>
<p>To clone the Pelican source:</p>
<div class="highlight-python"><pre>$ git clone https://github.com/getpelican/pelican.git src/pelican</pre>
</div>
<p>To install the development dependencies:</p>
<div class="highlight-python"><pre>$ cd src/pelican
$ pip install -r dev_requirements.txt</pre>
</div>
<p>To install Pelican and its dependencies:</p>
<div class="highlight-python"><pre>$ python setup.py develop</pre>
</div>
<p>Or using <tt class="docutils literal"><span class="pre">pip</span></tt>:</p>
<div class="highlight-python"><pre>$ pip install -e .</pre>
</div>
</div>
<div class="section" id="coding-standards">
<h2>Coding standards<a class="headerlink" href="#coding-standards" title="Permalink to this headline">¶</a></h2>
<p>Try to respect what is described in the <a class="reference external" href="http://www.python.org/dev/peps/pep-0008/">PEP8 specification</a> when making contributions. This
can be eased via the <a class="reference external" href="http://pypi.python.org/pypi/pep8">pep8</a> or <a class="reference external" href="http://pypi.python.org/pypi/flake8/">flake8</a> tools, the latter of which in
particular will give you some useful hints about ways in which the
code/formatting can be improved.</p>
</div>
<div class="section" id="building-the-docs">
<h2>Building the docs<a class="headerlink" href="#building-the-docs" title="Permalink to this headline">¶</a></h2>
<p>If you make changes to the documentation, you should preview your changes
before committing them:</p>
<div class="highlight-python"><pre>$ pip install sphinx
$ cd src/pelican/docs
$ make html</pre>
</div>
<p>Open <tt class="docutils literal"><span class="pre">_build/html/index.html</span></tt> in your browser to preview the documentation.</p>
</div>
<div class="section" id="running-the-test-suite">
<h2>Running the test suite<a class="headerlink" href="#running-the-test-suite" title="Permalink to this headline">¶</a></h2>
<p>Each time you add a feature, there are two things to do regarding tests:
check that the existing tests pass, and add tests for the new feature
or bugfix.</p>
<p>The tests live in <tt class="docutils literal"><span class="pre">pelican/tests</span></tt> and you can run them using the
&#8220;discover&#8221; feature of <tt class="docutils literal"><span class="pre">unittest</span></tt>:</p>
<div class="highlight-python"><pre>$ python -m unittest discover</pre>
</div>
<p>After making your changes and running the tests, you may see a test failure
mentioning that &#8220;some generated files differ from the expected functional tests
output.&#8221; If you have made changes that affect the HTML output generated by
Pelican, and the changes to that output are expected and deemed correct given
the nature of your changes, then you should update the output used by the
functional tests. To do so, you can use the following two commands:</p>
<div class="highlight-python"><pre>$ pelican -o pelican/tests/output/custom/ -s samples/pelican.conf.py \
    samples/content/
$ pelican -o pelican/tests/output/basic/ samples/content/</pre>
</div>
<div class="section" id="testing-on-python-2-and-3">
<h3>Testing on Python 2 and 3<a class="headerlink" href="#testing-on-python-2-and-3" title="Permalink to this headline">¶</a></h3>
<p>Testing on Python 3 currently requires some extra steps: installing
Python 3-compatible versions of dependent packages and plugins.</p>
<p><a class="reference external" href="http://testrun.org/tox/latest/">Tox</a> is a useful tool to run tests on both versions. It will install the
Python 3-compatible version of dependent packages.</p>
</div>
</div>
<div class="section" id="python-3-development-tips">
<h2>Python 3 development tips<a class="headerlink" href="#python-3-development-tips" title="Permalink to this headline">¶</a></h2>
<p>Here are some tips that may be useful when doing some code for both Python 2.7
and Python 3 at the same time:</p>
<ul class="simple">
<li>Assume every string and literal is unicode (import unicode_literals):<ul>
<li>Do not use prefix <tt class="docutils literal"><span class="pre">u'</span></tt>.</li>
<li>Do not encode/decode strings in the middle of sth. Follow the code to the
source (or target) of a string and encode/decode at the first/last possible
point.</li>
<li>In other words, write your functions to expect and to return unicode.</li>
<li>Encode/decode strings if e.g. the source is a Python function that is known
to handle this badly, e.g. strftime() in Python 2.</li>
</ul>
</li>
<li>Use new syntax: print function, &#8220;except ... <em>as</em> e&#8221; (not comma) etc.</li>
<li>Refactor method calls like <tt class="docutils literal"><span class="pre">dict.iteritems()</span></tt>, <tt class="docutils literal"><span class="pre">xrange()</span></tt> etc. in a way
that runs without code change in both Python versions.</li>
<li>Do not use magic method <tt class="docutils literal"><span class="pre">__unicode()__</span></tt> in new classes. Use only <tt class="docutils literal"><span class="pre">__str()__</span></tt>
and decorate the class with <tt class="docutils literal"><span class="pre">&#64;python_2_unicode_compatible</span></tt>.</li>
<li>Do not start int literals with a zero. This is a syntax error in Py3k.</li>
<li>Unfortunately I did not find an octal notation that is valid in both
Pythons. Use decimal instead.</li>
<li>use six, e.g.:<ul>
<li><tt class="docutils literal"><span class="pre">isinstance(..,</span> <span class="pre">basestring)</span> <span class="pre">-&gt;</span> <span class="pre">isinstance(..,</span> <span class="pre">six.string_types)</span></tt></li>
<li><tt class="docutils literal"><span class="pre">isinstance(..,</span> <span class="pre">unicode)</span> <span class="pre">-&gt;</span> <span class="pre">isinstance(..,</span> <span class="pre">six.text_type)</span></tt></li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">setlocale()</span></tt> in Python 2 bails when we give the locale name as unicode,
and since we are using <tt class="docutils literal"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">unicode_literals</span></tt>, we do
that everywhere!  As a workaround, I enclosed the localename with <tt class="docutils literal"><span class="pre">str()</span></tt>;
in Python 2 this casts the name to a byte string, in Python 3 this should do
nothing, because the locale name already had been unicode.</li>
<li>Kept range() almost everywhere as-is (2to3 suggests list(range())), just
changed it where I felt necessary.</li>
<li>Changed xrange() back to range(), so it is valid in both Python versions.</li>
</ul>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
  
    <a href="http://github.com/dongdxf/pelican-docs-chs"><img style="position: fixed; top: 0; right: 0; border: 0;"
    src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
  

  

  </body>
</html>